<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Nomad Network</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light">

<!-- NAVBAR -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm">
    <div class="container">
        <a class="navbar-brand fw-bold" href="/">Nomad Network</a>

		<div class="ms-auto d-flex gap-3 align-items-center">

		    <!-- When NOT logged in -->
		    <a th:if="${currentUser == null}"
		       href="/login"
		       class="btn btn-outline-light btn-sm">
		        Login
		    </a>

		    <a th:if="${currentUser == null}"
		       href="/register"
		       class="btn btn-outline-light btn-sm">
		        Register
		    </a>

		    <!-- When logged in -->
		    <div th:if="${currentUser != null}"
		         class="d-flex align-items-center gap-3">
				 
				 <!-- Create Post Button -->
				 <a th:href="@{/posts/create}"
				 class="btn btn-success btn-sm">
				 + Create Post
				 </a>

		        <!-- Profile Button -->
		        <a th:href="@{/profile}"
		           class="btn btn-outline-light btn-sm">
		            <span th:text="${currentUser.userName}">Username</span>
		        </a>

		        <!-- Logout -->
		        <form th:action="@{/logout}" method="post" class="m-0">
		            <button class="btn btn-outline-danger btn-sm">
		                Logout
		            </button>
		        </form>

		    </div>

		</div>


    </div>
</nav>

<!-- MAIN FEED -->
<div class="container mt-5">

    <!-- HERO TEXT -->
    <div class="text-center mb-5">
        <h1 class="fw-bold">üåç Explore Real Travel Stories</h1>
        <p class="text-muted">
            Discover places through experiences shared by real travelers
        </p>

        <!-- SEARCH -->
        <form th:action="@{/places/search}" method="get" class="d-flex justify-content-center mt-4">
            <input type="text" name="keyword"
                   class="form-control w-50 rounded-start"
                   placeholder="Search a place..." required>
            <button class="btn btn-primary rounded-end">Search</button>
        </form>
    </div>

    <!-- FEED GRID -->
    <div class="row g-4">

        <!-- POST CARD -->
        <div class="col-md-6" th:each="post : ${posts}">
            <div class="card shadow-sm h-100 border-0">

                <!-- IMAGE -->
				<img th:src="${post.postUrl != null ? post.postUrl : '/images/placeholder.jpg'}"
				     class="card-img-top"
				     alt="Place image">

										   

                <!-- BODY -->
                <div class="card-body">
                    <h5 class="card-title fw-semibold"
                        th:text="${post.title}">Post title</h5>

                    <p class="text-muted mb-1">
                        üìç <span th:text="${post.placeName}">Place</span>
                    </p>

                    <p class="text-muted small mb-2">
                        By <span th:text="${post.userName}">User</span> ¬∑
                        <span th:text="${#temporals.format(post.createdAt,'dd MMM yyyy')}">Date</span>
                    </p>

                    <a th:href="@{/posts/{id}(id=${post.postID})}"
                       class="btn btn-sm btn-outline-primary">
                        View Post
                    </a>
                </div>
            </div>
        </div>

    </div>
</div>

<!-- FOOTER -->
<footer class="bg-dark text-light mt-5 py-3">
    <div class="container text-center small">
        &copy; 2026 Nomad Network ¬∑ Travel Smarter, Travel Safer
    </div>
